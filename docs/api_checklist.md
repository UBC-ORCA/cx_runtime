# Starting Point

:white_check_mark: application-level runtime services to allocate CXUs/contexts

:white_check_mark: simple M-mode mcx_selector operation

:x: application alternating between 2 different CXUs / contexts

:white_check_mark: simple ABI, manually written & inserted into the code


# Long Term
:x: an application that uses at least 2 different CXUs together with a linked library that uses at least 1 CXU (3 different CXUs)

:white_check_mark: at least 1 of the CXUs has >= 2 states

:white_check_mark: the application runs in User mode, and changes CXUs/contexts using cx_index/scx_table which are modified in either User mode (early PoC) or Supervisor mode (real Linux, final PoC)

:white_check_mark: the application runs in Machine mode, and changes CXUs/context using mcx_selector

:white_check_mark: ideally, if possible, the application is written in a portable way so it looks the same no matter which mode is used (U/S or M).

:white_check_mark: an ABI allowing proper CXU selection across function calls and library boundaries

:x: produce a set of ABI rules and implement by example.

:white_check_mark: intrinsics or assembly-level changes to allow arbitrary CXU custom instructions to be generated and disassembled

:white_check_mark: a user-level API that interfaces with OS-level kernel calls to allocate CXUs and Contexts, define contents of scx_table

:white_check_mark: Linux changes in S-mode to manipulate scx_table, ensuring contents of table are fully protected from manipulation by the U-mode application (ie, the page is not writable, mapped as read-only in the memory space of the application)

:white_check_mark: ability to save and restore states, either by virtualization of states or by context switching

:x: application fallback/recovery from errors such as missing CXU, illegal CXU instructions, etc

:x: supports virtualization of states

:x: supports context switching

# Future Work

:x: a System Manifest (full yaml/description, can be manually generated but ideally generated by tools mimicing the behaviour of a Composer tool) to create the in-memory OS/Runtime System CXU Map

:x: Have Linux read the device tree and generate the cx_map

:x: Have GCC / LLVM enforce the ABI rules
